h1. is_approvable

h3. What is this?

This Rails plugin sends email reports about new records created in a database.
It is good for situations where records are created by public users and the
data needs to be moderated.

h3. Usage

Ensure you have field 'approved' in a model. Then you can add is_approvable to the model:
<pre>
class Post < ActiveRecord::Base
  is_approvable
end
</pre>

By default, the report is sent with the content of fields 'id' and
'created_at'. This can be changed by specifying the fields:
<pre>
class Post < ActiveRecord::Base
  is_approvable :title, :body, :writer_name
end
</pre>

To make the links of the email working, add approves_models to the corresponding controller:
<pre>
class PostsController < ApplicationController
  approves_models
end
</pre>
And routes to config/routes.rb:
<pre>
ActionController::Routing::Routes.draw do |map|
  # Old lines..

  # Add :approve and :unapprove actions.
  map.resources :posts, :member => { :approve => :get, :unapprove => :get }

end

</pre>
Then set recipients in config/environments/production.rb
<pre>
IsApprovable::ActivityMailer.activity_recipients = %w(recipient1@example.com recipient2@example.com)
</pre>

Now restart Rails and everything should be ready.


